{{ header }}{{ column_left }}
<div id="content">

	<div class="page-header">
		<div class="container-fluid">
			<div class="page-ctrl-controls" data-iwidth="" data-owidth="">
				<button type="submit" form="form-art" data-bs-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary">
					<i class="fa-solid fa-floppy-disk">
					</i>
				</button>
				<a href="{{ back }}" data-bs-toggle="tooltip" title="{{ button_back }}" class="btn btn-light">
					<i class="fa-solid fa-reply">
					</i>
				</a>
			</div>
			<h1>
				{{ heading_title }}
			</h1>
			<ol class="breadcrumb">
				{% for breadcrumb in breadcrumbs %}
				<li class="breadcrumb-item">
					<a href="{{ breadcrumb.href }}">
						{{ breadcrumb.text }}
					</a>
				</li>
				{% endfor %}
			</ol>
		</div>
	</div>
	<div class="container-fluid">
		<div class="card">
			<div class="card-header">
				<i class="fa-solid fa-pencil">
				</i>{{ text_form }}
			</div>
			<div class="card-body">
				<form id="form-art" action="{{ save }}" method="post" >
					<input type="hidden" name="art_id" value="{{ art_id }}" id="artId"/>
					<ul class="nav nav-tabs">
						<li class="nav-item">
							<a href="#tab-general" data-bs-toggle="tab" class="nav-link active">
								{{ tab_general }}
							</a>
						</li>
					</ul>

					<div class="tab-content">
						<div class="tab-pane active" id="tab-general">
							<div class="row mb-3">
								<label class="col-sm-2 col-form-label">{{ entry_status }}</label>
								<div class="col-sm-10">
									<div class="input-group">
										<div class="form-check form-switch form-switch-lg">
											<input type="hidden" name="status" value="0"/>
											<input type="checkbox" name="status" value="1" id="input-status" class="form-check-input"{% if status %} checked{% endif %}/>
										</div>
									</div>
								</div>
							</div>

							<div class="row mb-3 required">
								<label for="input-code" class="col-sm-2 col-form-label">{{ entry_code }}</label>
								<div class="col-sm-10">
									<input type="text" name="art_code" value="{{ art_code }}" placeholder="{{ entry_code }}" id="input-code" class="form-control"/>
									<div id="error-art_code" class="invalid-feedback">
									</div>
								</div>
							</div>

							<div class="row mb-3">
								<label for="input-made_year" class="col-sm-2 col-form-label">{{ entry_made_year }}</label>
								<div class="col-sm-10">
									<input type="text" name="made_year" value="{{ made_year }}" placeholder="{{ entry_made_year }}" id="input-made_year" class="form-control"/>

								</div>
							</div>


							<div class="row mb-3">
								<label class="col-sm-2 col-form-label">{{ entry_image }}</label>
								<div class="col-sm-10">
									 <div id="image" class="card image">
                      					<img src="{{ thumb }}" alt="" title="" id="thumb-image" data-oc-placeholder="{{ placeholder }}" class="card-img-top"/> 
                      					<input type="hidden" name="image" value="{{ image }}" id="input-image"/>
					                    <div class="card-body">
					                        <button type="button" data-oc-toggle="image" data-oc-target="input-image" data-oc-thumb="#thumb-image" class="btn btn-primary btn-sm btn-block"><i class="fa-solid fa-pencil"></i> {{ button_edit }}</button>
					                        <button type="button" data-oc-toggle="clear" data-oc-target="input-image" data-oc-thumb="#thumb-image" class="btn btn-warning btn-sm btn-block"><i class="fa-regular fa-trash-can"></i> {{ button_clear }}</button>
					                    </div>
                    				</div>
								</div>
							</div>

							<div class="row mb-3">
								<label class="col-sm-2 col-form-label">{{ entry_category }}</label>
								<div class="col-sm-10">
									<input type="text" name="category" value="" placeholder="{{ entry_category }}" id="input-category" data-oc-target="autocomplete-category" class="form-control" autocomplete="off"/>
									<ul id="autocomplete-category" class="dropdown-menu">
									</ul>
									<div class="input-group">
										<div class="form-control p-0" style="height: 150px; overflow: auto;">
											<table id="art-category" class="table table-sm m-0">
												<tbody>
													{% for art_category in art_categories %}
													<tr id="arty-category-{{ art_category.art_category_id }}">
														<td>
															{{ art_category.name }}<input type="hidden" name="art_category[]" value="{{ art_category.art_category_id }}"/>
														</td>
														<td class="text-end">
															<button type="button" class="btn btn-danger btn-sm">
																<i class="fa-solid fa-minus-circle"></i>
															</button>
														</td>
													</tr>
													{% endfor %}
												</tbody>
											</table>
										</div>
									</div>

								</div>
							</div>
							<div class="row mb-3">
								<label for="input-sort_order" class="col-sm-2 col-form-label">{{ entry_sort_order }}</label>
								<div class="col-sm-10">
									<input type="text" name="sort_order" value="{{ sort_order }}" placeholder="{{ entry_sort_order }}" id="input-sort_order" class="form-control"/>

								</div>
							</div>
						

						<ul class="nav nav-tabs" id="language">
							{% for language in languages %}
							<li class="nav-item">
								<a href="#language-{{ language.language_id }}" data-bs-toggle="tab" class="nav-link{% if loop.first %} active{% endif %}">
									<img src="{{ language.image|lower }}" title="{{ language.name }}"/> {{ language.name }}
								</a>
							</li>
							{% endfor %}
						</ul>
						<div class="tab-content">
							{% for language in languages %}
							<div class="tab-pane lan {% if loop.first %} active{% endif %}" id="language-{{ language.language_id }}" lid="{{ language.language_id }}">
								<div class="row mb-3">
									<label for="input-name-{{ language.language_id }}" class="col-sm-2 col-form-label">
										{{ entry_name }}
									</label>
									<div class="col-sm-10">
										<input type="text" name="art_description[{{ language.language_id }}][name]" value="{{ art_description[language.language_id] ? art_description[language.language_id].name }}" placeholder="{{ entry_name }}" id="input-name-{{ language.language_id }}" class="form-control"/>

									</div>
								</div>


								<div class="row mb-3">
									<label for="input-description-{{ language.language_id }}" class="col-sm-2 col-form-label">
										{{ entry_description }}
									</label>
									<div class="col-sm-10">
										<textarea name="art_description[{{ language.language_id }}][description]" rows="8" placeholder="{{ entry_description }}" id="input-description-{{ language.language_id }}" data-toggle="summernote" class="form-control">{{ art_description[language.language_id] ? art_description[language.language_id].description }}</textarea>

									</div>
								</div>


								<div class="row mb-3">
									<label class="col-sm-2 col-form-label"> SEO </label>
									<div class="col-sm-10">
										<ul class="nav nav-tabs" id="meta">
											<li class="nav-item">
												<a href="#tab-meta-title-{{ language.language_id }}" data-bs-toggle="tab" class="nav-link required">
													{{ entry_meta_title }}
													<i class="{{ art_description[language.language_id].meta_title ? 'fa-solid': 'fa-regular' }} fa-circle">
													</i>
												</a>
											</li>
											<li class="nav-item">
												<a href="#tab-meta-description-{{ language.language_id }}" data-bs-toggle="tab" class="nav-link">
													{{ entry_meta_description }}
													<i class="{{ art_description[language.language_id].meta_description ? 'fa-solid': 'fa-regular' }} fa-circle">
													</i>
												</a>
											</li>
											<li class="nav-item">
												<a href="#tab-meta-keyword-{{ language.language_id }}" data-bs-toggle="tab" class="nav-link">
													{{ entry_meta_keyword }}
													<i class="{{ art_description[language.language_id].meta_keyword ? 'fa-solid': 'fa-regular' }} fa-circle">
													</i>
												</a>
											</li>
											<li class="nav-item">
												<a href="#tab-meta-seo-{{ language.language_id }}" data-bs-toggle="tab" class="nav-link active">
													{{ entry_seo_url }}
													<i class="{{ art_seo_url[store_id][language.language_id] ? 'fa-solid': 'fa-regular' }} fa-circle">
													</i>
												</a>
											</li>
										</ul>
										<div class="tab-content">
											<div class="tab-pane" id="tab-meta-title-{{ language.language_id }}">
												<div class="row mb-3">
													<div>
														<input type="text" name="art_description[{{ language.language_id }}][meta_title]" value="{{ art_description[language.language_id].meta_title }}" placeholder="{{ entry_meta_title }}" id="input-meta-title-{{ language.language_id }}" class="form-control"/>
														<div id="error-meta-title-{{ language.language_id }}" class="invalid-feedback">
														</div>
													</div>
												</div>
											</div>
											<div class="tab-pane " id="tab-meta-description-{{ language.language_id }}">
												<div class="row mb-3">
													<div class="col-sm-12">
														<textarea name="art_description[{{ language.language_id }}][meta_description]" rows="5" placeholder="{{ entry_meta_description }}" id="input-meta-description-{{ language.language_id }}" class="form-control">{{ art_description[language.language_id].meta_description }}</textarea>
													</div>
												</div>
											</div>
											<div class="tab-pane " id="tab-meta-keyword-{{ language.language_id }}">
												<div class="row mb-3">
													<div class="col-sm-12">
														<textarea name="art_description[{{ language.language_id }}][meta_keyword]" rows="5" placeholder="{{ entry_meta_keyword }}" id="input-meta-keyword-{{ language.language_id }}" class="form-control">{{ art_description[language.language_id].meta_keyword }}</textarea>
													</div>
												</div>
											</div>
											<div class="tab-pane active" id="tab-meta-seo-{{ language.language_id }}">
												<div class="row mb-3">
													<div class="col-sm-12">
														<div class="alert alert-info">
															<i class="fa-solid fa-info-circle"></i>{{ text_keyword }}
														</div>
														<div class="input-group">
															<div class="input-group-text">
																<img src="{{ language.image|lower }}" title="{{ language.name }}" style="margin-right:10px;"/>  {{ url }}
															</div>
															<input type="text" name="art_seo_url[{{ language.language_id }}]" value="{{ art_seo_url[language.language_id] }}" placeholder="{{ entry_keyword }}" id="input-keyword-{{ language.language_id }}" class="form-control input-seo-url" style="padding-left: 1px;"/>
														</div>
														<div id="error-keyword-{{ language.language_id }}" class="invalid-feedback">
														</div>
													</div>
												</div>
											</div>

										</div>
									</div>
								</div>

							</div>
							{% endfor %}
						</div>
					</div>
</div>
				</form>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript"><!--
$('input[name=\'category\']').autocomplete({
		'source': function(request, response){
			$.ajax({
					url: 'index.php?route=bytao/art_category.autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
					dataType: 'json',
					success: function(json){
						response($.map(json, function(item){
									return{
										label: item['name'],
										value: item['art_category_id']
									}
								}));
					}
				});
		},
		'select': function(item){
			$('input[name=\'art_category\']').val('');
			$('#art-category' + item['value']).remove();
			$('#art-category').append('<div id="art-category' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="art_category[]" value="' + item['value'] + '" /></div>');
		}
	});

$('#art-category').on('.fa-minus-circle', 'click', function(){
		$(this).parent().remove();
	});

//--></script>
{{ footer }}
