<form id="form-document" method="post" data-oc-toggle="ajax" data-oc-load="{{ action }}" data-oc-target="document">
	<div class="table-responsive">
		<table class="table table-bordered table-hover">
			<thead>
				<tr>
					<td class="text-center" style="width: 1px;"><input type="checkbox" onclick="$('input[name*=\'selected\']').prop('checked', $(this).prop('checked'));" class="form-check-input"/></td>
					<td class="text-start"><a href="{{ sort_order }}"{% if sort == 'd.sort_order' %} class="{{ order|lower }}"{% endif %}>{{ column_sort_order }}</a></td>
					<td class="text-start"><a href="{{ sort_name }}"{% if sort == 'dd.name' %} class="{{ order|lower }}"{% endif %}>{{ column_name }}</a></td>
					<td class="text-end"><a href="{{ sort_date_added }}"{% if sort == 'd.date_added' %} class="{{ order|lower }}"{% endif %}>{{ column_date_added }}</a></td>
					<td class="text-end">{{ column_action }}</td>
				</tr>
			</thead>
			<tbody id="sortable">
				{% if documents %}
					{% for document in documents %}
						<tr data-id="{{ document.document_id }}">
							<td class="text-center"><input type="checkbox" name="selected[]" value="{{ document.document_id }}" class="form-check-input"/></td>
							<td class="text-end">{{ document.sort_order }}</td>
							<td class="text-start">{{ document.name }}</td>
							<td class="text-end">{{ document.date_added }}</td>
							
							<td class="text-end"><a href="{{ document.edit }}" data-bs-toggle="tooltip" title="{{ button_edit }}" class="btn btn-primary"><i class="fa-solid fa-pencil"></i></a></td>
						</tr>
					{% endfor %}
				{% else %}
					<tr>
						<td class="text-center" colspan="6">{{ text_no_results }}</td>
					</tr>
				{% endif %}
			</tbody>
		</table>
	</div>
	<div class="row">
		<div class="col-sm-6 text-start">{{ pagination }}</div>
		<div class="col-sm-6 text-end">{{ results }}</div>
	</div>
</form>
<script type="text/javascript"><!--

$("#sortable").sortable({
			item:'tr',
			isValidTarget: function  (item, container) {
			},
			update: function (item, container, _super) {
				var Olchild=$('#sortable tr');
				serials='';
				$(Olchild).each(function(){
						serials += $(this).attr('data-id')+'_'
					});
				$.ajax({
						url: 'index.php?route=bytao/document|sort&user_token={{ user_token }}',
						dataType: 'json',
						type:'post',
						data:{serial:serials},	
						success: function(json) {
						}
					});
				/**/

			},
			serialize: function (parent, children, isContainer) {
				return isContainer ? children.join() : parent.attr('id');
			},
			tolerance: 6,
			distance: 10,
			activate: function( event, ui ) { 
	  
			}
		}


);
//--></script> 