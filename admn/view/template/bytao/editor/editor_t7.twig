<div class="row" >
	<form id="form-t7">
	<input type="hidden" name="item_id" value="{{ item_id }}" />
	<legend></legend>
	<fieldset id="carousel">
		
		<div class="row mb-3">
			<label class="col-sm-2 col-form-label" for="title-item">{{ entry_title_item }}</label>
			<div class="col-sm-10">
				<input type="text" value="{{ title_item }}" id="title-item" name="title_item" class="form-control"/>
			</div>
		</div>
		
		<div class="row mb-3">
	        <label for="input-status" class="col-sm-2 col-form-label">{{ entry_title_status }}</label>
	        <div class="col-sm-10">
	          <div class="form-check form-switch form-switch-lg">
	            <input type="hidden" name="setting[status]" value="0"/> <input type="checkbox" name="setting[status]" value="1" id="input-status" class="form-check-input"{% if setting.status %} checked{% endif %}/>
	          </div>
	        </div>
	    </div>
		
		<div class="row mb-3">
			<label class="col-sm-2 col-form-label" for="carouseltype">{{ entry_carousel_type }}</label>
			<div class="col-sm-10">
				<select id="carouseltype" name="type_item" class="form-control fItem">
					<!--<option>{{ text_select }}</option>-->
					{% for p,item in carousels %}
					<option value="{{ p }}"  {% if p == type_item %} selected="selected" {% endif %}>{{ item }}</option>
					{% endfor %}
				</select>
			</div>
		</div>
		
		<div class="row mb-3 sel p0 hidden">
			<label class="col-sm-2 col-form-label" for="banners">{{ entry_carousel_banner }}</label>
			<div class="col-sm-10">
				<select id="banners" class="form-control fItem" name="item_banner_id">
					{% for item in banners %}
					<option value="{{ item.banner_id }}"  {% if item.banner_id == item_banner_id %} selected="selected" {% endif %}>{{ item.name }}</option>
					{% endfor %}
				</select>
			</div>
		</div>
		
		
        
        <div class="row mb-3 sel p1 hidden">
            <label class="col-sm-2 col-form-label" for="input-carousel-product">{{ entry_carousel_product }}</label>
            <div class="col-sm-10">
              <input type="text" name="product" value="" placeholder="{{ entry_carousel_product }}" id="input-carousel-product" data-oc-target="autocomplete-carousel-product" class="form-control" autocomplete="off"/>
              <ul id="autocomplete-carousel-product" class="dropdown-menu"></ul>
              <div class="input-group">
                <div class="form-control p-0" style="height: 150px; overflow: auto;">
                  <table id="carousel-product" class="table table-sm m-0">
                    <tbody>
                      {% for carousel_product in carousel_products %}
                        <tr id="carousel-product-{{ carousel_product.product_id }}">
                          <td>{{ carousel_product.name }}<input type="hidden" name="products[]" value="{{ carousel_product.product_id }}"/></td>
                          <td class="text-end"><button type="button" class="btn btn-danger btn-sm"><i class="fa-solid fa-minus-circle"></i></button></td>
                        </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        
        <div class="row mb-3 sel p2 hidden">
			<label class="col-sm-2 col-form-label" for="input-category">{{ entry_carousel_category }}</label>
            
                <div class="col-sm-10">
                  <input type="text" name="category" value="" placeholder="{{ entry_carousel_category }}" id="input-category" data-oc-target="autocomplete-category" class="form-control" autocomplete="off"/>
                  <ul id="autocomplete-category" class="dropdown-menu"></ul>
                  <div class="input-group">
                    <div class="form-control p-0" style="height: 150px; overflow: auto;">
                      <table id="item-category" class="table table-sm m-0">
                        <tbody>
                          {% for category in categories %}
                            <tr id="item-category-{{ category.category_id }}">
                              <td>{{ category.name }}<input type="hidden" name="categories[]" value="{{ category.category_id }}"/></td>
                              <td class="text-end"><button type="button" class="btn btn-danger btn-sm"><i class="fa-solid fa-minus-circle"></i></button></td>
                            </tr>
                          {% endfor %}
                        </tbody>
                      </table>
                    </div>
                  </div>
                  <div class="form-text">{{ help_category }}</div>
                </div>       
        
        </div>
        
        <div class="row mb-3 sel p2 hidden">
			<label class="col-sm-2 col-form-label" for="show-showcat">{{ entry_show_catname }}</label>
			<div class="col-sm-10">
				<div class="form-check form-switch form-switch-lg">
	            <input type="hidden" name="setting[showcat]" value="0"/> <input type="checkbox" name="setting[showcat]" value="1" id="show-showcat" class="form-check-input"{% if setting.showcat %} checked{% endif %}/>
	          </div>
			</div>
		</div>
		
        <div class="row mb-3 sel p2 hidden">
			<label class="col-sm-2 col-form-label" for="show-item">{{ entry_show_item }}</label>
			<div class="col-sm-10">
				<input type="text" value="{{ setting.show ? setting.show:'4,4,3,1' }}" id="show-item" name="setting[show]" class="form-control"/>
			</div>
		</div>
        
        <div class="row mb-3 sel p2 hidden">
			<label class="col-sm-2 col-form-label" for="max-item">{{ entry_max_products }}</label>
			<div class="col-sm-10">
				<input type="number" value="{{ max_item }}" id="max-item" name="max_item" class="form-control"/>
			</div>
		</div>
		
		<div class="row mb-3">
            <label for="input-effect" class="col-sm-2 col-form-label">{{ entry_effect }}</label>
            <div class="col-sm-10">
              <select name="setting[effect]" id="input-effect" class="form-select">
                <option value="slide"{% if setting.effect == 'slide' %} selected{% endif %}>{{ text_slide }}</option>
                <option value="fade"{% if setting.effect == 'fade' %} selected{% endif %}>{{ text_fade }}</option>
              </select>
            </div>
          </div>
          
          <div class="row mb-3">
            <label for="input-controls" class="col-sm-2 col-form-label">{{ entry_controls }}</label>
            <div class="col-sm-10">
              <select name="setting[controls]" id="input-controls" class="form-select">
                <option value="1"{% if setting.controls == 1 %} selected{% endif %}>{{ text_yes }}</option>
                <option value="0"{% if setting.controls == 0 %} selected{% endif %}>{{ text_no }}</option>
              </select>
            </div>
          </div>
          <div class="row mb-3">
            <label for="input-indicators" class="col-sm-2 col-form-label">{{ entry_indicators }}</label>
            <div class="col-sm-10">
              <select name="setting[indicators]" id="input-indicators" class="form-select">
                <option value="1"{% if setting.indicators == 1 %} selected{% endif %}>{{ text_yes }}</option>
                <option value="0"{% if setting.indicators == 0 %} selected{% endif %}>{{ text_no }}</option>
              </select>
            </div>
          </div>
          <div class="row mb-3">
            <label for="input-interval" class="col-sm-2 col-form-label">{{ entry_interval }}</label>
            <div class="col-sm-10">
              <input type="text" name="setting[interval]" value="{{ setting.interval }}" placeholder="{{ entry_interval }}" id="input-interval" class="form-control"/>
            </div>
          </div>
          <div class="row mb-3 required">
            <label for="input-width" class="col-sm-2 col-form-label">{{ entry_width }}</label>
            <div class="col-sm-10">
              <input type="text" name="setting[width]" value="{{ setting.width }}" placeholder="{{ entry_width }}" id="input-width" class="form-control"/>
              <div id="error-width" class="invalid-feedback"></div>
            </div>
          </div>
          <div class="row mb-3 required">
            <label for="input-height" class="col-sm-2 col-form-label">{{ entry_height }}</label>
            <div class="col-sm-10">
              <input type="text" name="setting[height]" value="{{ setting.height }}" placeholder="{{ entry_height }}" id="input-height" class="form-control"/>
              <div id="error-height" class="invalid-feedback"></div>
            </div>
          </div>
		
	</fieldset>
	</form>
</div>

<script type="text/javascript"><!--

$('#input-category').autocomplete({
    'source': function (request, response) {
        $.ajax({
            url: 'index.php?route=catalog/category.autocomplete&user_token={{ user_token }}&filter_name=' + encodeURIComponent(request.term),
            dataType: 'json',
            success: function (json) {
                response($.map(json, function (item) {
                    return {
                        label: item.name,
                        value: item.category_id
                    }
                }));
            }
        });
    },
    'select': function ( event, ui) {
        $('#item-category-' + ui.item.value).remove();
        
        html = '<tr id="item-category-' + ui.item.value + '">';
        html += '  <td>' + ui.item.label + '<input type="hidden" name="categories[]" value="' + ui.item.value + '"/></td>';
        html += '  <td class="text-end"><button type="button" class="btn btn-danger btn-sm"><i class="fa-solid fa-minus-circle"></i></button></td>';
        html += '</tr>';

        $('#item-category tbody').append(html);
        $('#input-category').val('');
    }
});

$('#item-category').on('click', '.btn', function () {
    $(this).parent().parent().remove();
});

$('#input-carousel-product').autocomplete({
    'source': function (request, response) {
        $.ajax({
            url: 'index.php?route=catalog/product.autocomplete&user_token={{ user_token }}&filter_name=' + encodeURIComponent(request.term),
            dataType: 'json',
            success: function (json) {
                response($.map(json, function (item) {
                    return {
                        label: item.name,
                        value: item.product_id
                    }
                }));
            }
        });
    },
    'select': function (el,sel) {
        console.log(el)
		$('#carousel-product-' + sel.item.value).remove();

        html = '<tr id="carousel-product-' + sel.item.value + '">';
        html += '  <td>' + sel.item.label + '<input type="hidden" name="products[]" value="' + sel.item.value + '"/></td>';
        html += '  <td class="text-end"><button type="button" class="btn btn-danger btn-sm"><i class="fa-solid fa-minus-circle"></i></button></td>';
        html += '</tr>';

        $('#carousel-product tbody').append(html);
        $('#input-carousel-product').val('');
    }
});

$('#carousel-product').on('click', '.btn', function () {
    $(this).parent().parent().remove();
});

$(document).on('change', '#carouseltype', function () {
	var selVal= $(this).val();
    $('#carousel .sel').each(function(){
    	if(!$(this).hasClass('hidden')){
    		$(this).addClass('hidden');
    	}
    });
    $('#carousel .p'+selVal).removeClass('hidden')
});

--></script>